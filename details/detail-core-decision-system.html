<div id="detail-core-decision-system">
    <div class="detail-content">
        <div class="detail-header">
            <h2 class="detail-title">ðŸ§  Decision System</h2>
            <button class="detail-close" onclick="hideDetail()">Close</button>
        </div>
        <div class="detail-section">
            <h3>System Architecture</h3>
            <p>The EWaGI Decision System is a sophisticated framework that enables firms to make strategic investment and operational decisions through a policy-driven, multi-stage evaluation process.</p>
            <ul class="detail-list">
                <li><strong>DecisionEngine:</strong> Central orchestrator coordinating the entire decision-making process</li>
                <li><strong>DecisionPolicy:</strong> Strategy implementations that generate investment proposals</li>
                <li><strong>CapitalAllocator:</strong> Budget allocation logic selecting proposals within constraints</li>
                <li><strong>DecisionExecutor:</strong> Execution engine applying approved decisions</li>
                <li><strong>DecisionContext:</strong> Contextual information passed between components</li>
            </ul>
        </div>
        <div class="detail-section">
            <h3>Policy-Driven Decision Making</h3>
            <p>The system operates on the principle of policy-driven decision making, where different business strategies are encapsulated as independent DecisionPolicy implementations.</p>
            <ul class="detail-list">
                <li><strong>CapacityExpansionPolicy:</strong> Evaluates opportunities for expanding production capacity when utilization exceeds 85%</li>
                <li><strong>EfficiencyUpgradePolicy:</strong> Identifies opportunities for energy efficiency improvements with step-wise upgrades</li>
                <li><strong>CapitalRenewalPolicy:</strong> Equipment replacement decisions (framework ready)</li>
                <li><strong>ProcessRDPolicy:</strong> Process innovation investments (framework ready)</li>
                <li><strong>ProductRDPolicy:</strong> Product development investments (framework ready)</li>
            </ul>
        </div>
        <div class="detail-section">
            <h3>Decision Flow Process</h3>
            <p>The decision-making process follows a clean separation of concerns with distinct phases:</p>
            <ol style="color:#e2e8f0;margin-left:20px;line-height:1.6;">
                <li><strong>Policy Evaluation:</strong> Each policy evaluates the current economic context</li>
                <li><strong>Proposal Generation:</strong> Policies generate relevant investment proposals</li>
                <li><strong>Capital Allocation:</strong> GreedyAllocator selects proposals by NPV ranking within budget constraints</li>
                <li><strong>Decision Execution:</strong> Approved decisions are applied to simulation state</li>
                <li><strong>State Update:</strong> Changes are reflected in firm's financial and operational systems</li>
            </ol>
        </div>
        <div class="detail-section">
            <h3>Economic Integration</h3>
            <p>The system maintains economic consistency through proper scaling conventions and financial integration:</p>
            <ul class="detail-list">
                <li><strong>Scaling Awareness:</strong> Handles both SIM and REAL scale calculations using SIMULATION_SCALE_RATIO</li>
                <li><strong>NPV Calculations:</strong> 36-period discounted cash flow analysis for capacity expansion, 24-period for efficiency upgrades</li>
                <li><strong>Financial Integration:</strong> Properly books investments in firm accounts using FinanceUtils</li>
                <li><strong>Market Integration:</strong> Uses current market prices for cost calculations and WACC for discounting</li>
            </ul>
        </div>
        <div class="detail-section">
            <h3>Key Features</h3>
            <ul class="detail-list">
                <li><strong>Modular Design:</strong> Easy to add/remove policies without affecting others</li>
                <li><strong>Extensible Framework:</strong> Clean interfaces for custom policy implementation</li>
                <li><strong>Performance Optimized:</strong> Stream processing and early termination for efficiency</li>
                <li><strong>Economic Validation:</strong> Comprehensive testing strategy including unit, integration, and scenario tests</li>
            </ul>
        </div>
    </div>
</div>
